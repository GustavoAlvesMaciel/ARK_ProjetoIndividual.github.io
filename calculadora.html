<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisar Criatura</title>
</head>
<body>

    <label for="porte">Selecione o Porte da criatura:</label>
    <select id="porte">
        <option value="Pequeno">Pequeno</option>
        <option value="Médio">Médio</option>
        <option value="Grande">Grande</option>
    </select>
    
    <label for="lvlcriatura">Digite o lvl da criatura:</label>
    <input type="text" id="lvlcriatura">
    
    <label for="arma">Selecione o tipo de arma:</label>
    <select id="arma">
        <option value="FlechaSedativa">Flecha Sedativa (Padrão)</option>
        <option value="DardoTranquilizante">Dardo Tranquilizante (3x menos)</option>
        <option value="Estilingue">Estilingue (10x mais)</option>
        <option value="Boomerang">Boomerang (6x mais)</option>
        <option value="Bastao">Bastão (20x mais)</option>
    </select>
    
    <button onclick="calcular()">Analisar</button>
    <div id="div_mensagem"></div>

    <script>
        function calcular() {
            // Obter valores dos elementos HTML
            var porteSelecionado = document.getElementById("porte").value;
            var nivelCriatura = parseInt(document.getElementById("lvlcriatura").value);
            var tipoArma = document.getElementById("arma").value;
    
            // Validar o nível da criatura
            if (isNaN(nivelCriatura) || nivelCriatura < 1) {
                alert("Digite um nível de criatura válido.");
                return;
            }
    
            // Lógica para determinar a quantidade de munição necessária com base no porte
            var fatorMultiplicativoPorte;
            switch (porteSelecionado) {
                case "Pequeno":
                    fatorMultiplicativoPorte = 0.5;  // Metade da quantidade padrão
                    break;
                case "Médio":
                    fatorMultiplicativoPorte = 1;    // Quantidade padrão
                    break;
                case "Grande":
                    fatorMultiplicativoPorte = 2;    // Dobro da quantidade padrão
                    break;
            }
    
            // Vetor de armas e fatores multiplicativos correspondentes
            var armas = [
                { nome: "FlechaSedativa", fator: 1, dano: 95, tempoParaTopor: 4 },
                { nome: "DardoTranquilizante", fator: 0.33, dano: 200, tempoParaTopor: 2 },  // 3x menos
                { nome: "Estilingue", fator: 10, dano: 14, tempoParaTopor: 6 },
                { nome: "Boomerang", fator: 6, dano: 30, tempoParaTopor: 8 },
                { nome: "Bastao", fator: 20, dano: 5, tempoParaTopor: 15 }
            ];

            // Encontrar o fator multiplicativo correspondente à arma selecionada
            var armaSelecionada = armas.find(function(arma) {
                return arma.nome === tipoArma;
            });
            
            var fatorMultiplicativoArma = armaSelecionada ? armaSelecionada.fator : 1;  // Padrão para casos não previstos
    
            // Calcular a quantidade de munição necessária, o dano causado e o tempo necessário para atingir o "topor"
            var quantidadeMunicao = Math.max(Math.floor(nivelCriatura / 15) * 2 * fatorMultiplicativoPorte * fatorMultiplicativoArma, 1);
            var danoCausado = quantidadeMunicao * armaSelecionada.dano;

            // Calcular a taxa de tiro
            var taxaDeTiro = calcularTaxaDeTiro(nivelCriatura, fatorMultiplicativoPorte, fatorMultiplicativoArma);

            // Ajustar o tempo de tiro com base na taxa de tiro por segundo
            var tempoDeTiro = 1 / taxaDeTiro;

            // Atualizar a div_mensagem com os resultados
            var div_mensagem = document.getElementById("div_mensagem");
            div_mensagem.innerHTML = "Porte da criatura selecionado: " + porteSelecionado +
                "<br>Tipo de arma selecionado: " + tipoArma +
                "<br>Quantidade de munição necessária: " + Math.ceil(quantidadeMunicao) +
                "<br>Dano causado: " + danoCausado +
                "<br>Tempo de estimado de tiros por segundo: " + tempoDeTiro.toFixed(2) + " segundos";

            console.log("Porte calculado com base no nível: " + porteSelecionado);
            console.log("Tipo de arma selecionado: " + tipoArma);
            console.log("Quantidade de munição necessária: " + quantidadeMunicao);
            console.log("Dano causado: " + danoCausado);
            console.log("Tempo de estimado de tiros por segundo: " + tempoDeTiro.toFixed(2) + " segundos");
        }

        function calcularTempoParaTopor(tempoBase, quantidadeMunicao) {
            // Lógica para calcular o tempo necessário para atingir o "topor"
            return tempoBase * quantidadeMunicao;
        }

        function calcularTaxaDeTiro(nivel, fatorPorte, fatorArma) {
            // Lógica para calcular a taxa de tiros por segundo com base nos fatores
            var taxaBase = 1;  // Taxa padrão
            var taxaNivel = Math.max(1, nivel / 10);  // Aumenta com o nível, mínimo de 1
            var taxaFinal = taxaBase * taxaNivel * fatorPorte * fatorArma;
            return taxaFinal;
        }
    </script>
    
</body>
</html>
